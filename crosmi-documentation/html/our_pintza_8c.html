<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Crosmi: ourPintza.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Crosmi
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Read consumption data</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('our_pintza_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">ourPintza.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="our_pintza_8h_source.html">ourPintza.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="our_a_d_c_8h_source.html">ourADC.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="our_timer_8h_source.html">ourTimer.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="our_rcc_gpio_8h_source.html">ourRccGpio.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="our_d_m_a_8h_source.html">ourDMA.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="our_d_a_c_8h_source.html">ourDAC.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ourPintza.c:</div>
<div class="dyncontent">
<div class="center"><img src="our_pintza_8c__incl.png" border="0" usemap="#our_pintza_8c" alt=""/></div>
<map name="our_pintza_8c" id="our_pintza_8c">
<area shape="rect" id="node2" href="our_pintza_8h.html" title="ourPintza.h" alt="" coords="151,155,239,181"/>
<area shape="rect" id="node5" href="our_a_d_c_8h.html" title="ourADC.h" alt="" coords="263,155,343,181"/>
<area shape="rect" id="node6" href="our_timer_8h.html" title="ourTimer.h" alt="" coords="525,155,609,181"/>
<area shape="rect" id="node7" href="our_rcc_gpio_8h.html" title="ourRccGpio.h" alt="" coords="24,155,126,181"/>
<area shape="rect" id="node8" href="our_d_m_a_8h.html" title="ourDMA.h" alt="" coords="368,155,449,181"/>
<area shape="rect" id="node9" href="our_d_a_c_8h.html" title="ourDAC.h" alt="" coords="38,80,118,107"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae16276a6cb76cf1a1462573259174e2d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="our_pintza_8c.html#ae16276a6cb76cf1a1462573259174e2d">ZIKLO_KOP</a>&#160;&#160;&#160;100</td></tr>
<tr class="separator:ae16276a6cb76cf1a1462573259174e2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc88080d4f406a8f4cf0efe3c395688a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="our_pintza_8c.html#adc88080d4f406a8f4cf0efe3c395688a">TIMER_ABIADURA</a>&#160;&#160;&#160;10</td></tr>
<tr class="separator:adc88080d4f406a8f4cf0efe3c395688a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21005f9f4e2ce7597c5eb4351816d7e2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="our_pintza_8c.html#a21005f9f4e2ce7597c5eb4351816d7e2">OFFSET</a>&#160;&#160;&#160;(uint16_t) 0x04d9</td></tr>
<tr class="separator:a21005f9f4e2ce7597c5eb4351816d7e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a197488db1e4921e50419bde04a61b890"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="our_pintza_8c.html#a197488db1e4921e50419bde04a61b890">ADCcallback</a> (uint16_t balioa)</td></tr>
<tr class="separator:a197488db1e4921e50419bde04a61b890"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9baabb03427960524df4a2fbb04f2e07"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="our_pintza_8c.html#a9baabb03427960524df4a2fbb04f2e07">initGPIOA6</a> (void)</td></tr>
<tr class="separator:a9baabb03427960524df4a2fbb04f2e07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62aa285aa159785a4686a5ac86ca8967"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="our_pintza_8c.html#a62aa285aa159785a4686a5ac86ca8967">initPintza</a> (void)</td></tr>
<tr class="separator:a62aa285aa159785a4686a5ac86ca8967"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb5ef8f5f79abfdadae9fd2de7d8ddb4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="our_pintza_8c.html#abb5ef8f5f79abfdadae9fd2de7d8ddb4">powerPintza</a> (uint32_t piztu)</td></tr>
<tr class="separator:abb5ef8f5f79abfdadae9fd2de7d8ddb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82fa6c5b99bf057573150a0609d8003c"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="our_pintza_8c.html#a82fa6c5b99bf057573150a0609d8003c">getAzkenKontsumoa</a> ()</td></tr>
<tr class="separator:a82fa6c5b99bf057573150a0609d8003c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a071cd75f04cd5217e7cef31c901e2bee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="our_pintza_8c.html#a071cd75f04cd5217e7cef31c901e2bee">setPintzaCallback</a> (void(*funtzioa)(uint16_t))</td></tr>
<tr class="separator:a071cd75f04cd5217e7cef31c901e2bee"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:afbf22e2955f0f34f2c76f425ce6cf272"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="our_pintza_8c.html#afbf22e2955f0f34f2c76f425ce6cf272">maxBalioa</a> = 0</td></tr>
<tr class="separator:afbf22e2955f0f34f2c76f425ce6cf272"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10f57d5c143288292b4a59f189b02c01"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="our_pintza_8c.html#a10f57d5c143288292b4a59f189b02c01">zikloak</a> = 0</td></tr>
<tr class="separator:a10f57d5c143288292b4a59f189b02c01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe29f7be5c2ee604debe235d6e5eac72"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="our_pintza_8c.html#afe29f7be5c2ee604debe235d6e5eac72">azkenMaxBalioa</a> = 0</td></tr>
<tr class="separator:afe29f7be5c2ee604debe235d6e5eac72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a652b2248682b933712868addf6195852"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="our_pintza_8c.html#a652b2248682b933712868addf6195852">callbackPintza</a> )(uint16_t)=0</td></tr>
<tr class="separator:a652b2248682b933712868addf6195852"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a21005f9f4e2ce7597c5eb4351816d7e2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OFFSET&#160;&#160;&#160;(uint16_t) 0x04d9</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="adc88080d4f406a8f4cf0efe3c395688a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMER_ABIADURA&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ae16276a6cb76cf1a1462573259174e2d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ZIKLO_KOP&#160;&#160;&#160;100</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a197488db1e4921e50419bde04a61b890"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ADCcallback </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>balioa</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function calculates the max value converted by the ADC. It waits for 3000 cycles and takes the max value. Used to take the peak value of the alternate current. And sets the max value to the callback function. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">balio</td><td>uint16_t type current value converted by the ADC. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void. </dd></dl>

</div>
</div>
<a class="anchor" id="a82fa6c5b99bf057573150a0609d8003c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t getAzkenKontsumoa </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the last value from the conversion made by ADC. </p><dl class="section return"><dt>Returns</dt><dd>azkenBalio: uint16_t type last conversion value. </dd></dl>

</div>
</div>
<a class="anchor" id="a9baabb03427960524df4a2fbb04f2e07"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initGPIOA6 </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes GPIO6 and sets its mode to Analog mode. </p><dl class="section return"><dt>Returns</dt><dd>void. </dd></dl>

</div>
</div>
<a class="anchor" id="a62aa285aa159785a4686a5ac86ca8967"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initPintza </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function initializes some peripherals to work with an extern tool (pintza). Initializes GPIO6, Timer 2, ADC, DAC and DMA. </p><dl class="section return"><dt>Returns</dt><dd>void. </dd></dl>

</div>
</div>
<a class="anchor" id="abb5ef8f5f79abfdadae9fd2de7d8ddb4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void powerPintza </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>piztu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function enables or disables Timer2 and ADC depending on the given param. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">piztu</td><td>uint32_t type acts as a boolean to enable or disable Timer 2 and ADC. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void. </dd></dl>

</div>
</div>
<a class="anchor" id="a071cd75f04cd5217e7cef31c901e2bee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setPintzaCallback </td>
          <td>(</td>
          <td class="paramtype">void(*)(uint16_t)&#160;</td>
          <td class="paramname"><em>funtzioa</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets callback function that recieves the last value of the conversion as parameter. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">funtzioa</td><td>void type function, is a pointer to a void returning function which take uint16_t type parameter. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void. </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="afe29f7be5c2ee604debe235d6e5eac72"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t azkenMaxBalioa = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a652b2248682b933712868addf6195852"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* callbackPintza) (uint16_t)=0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="afbf22e2955f0f34f2c76f425ce6cf272"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t maxBalioa = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a10f57d5c143288292b4a59f189b02c01"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t zikloak = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="our_pintza_8c.html">ourPintza.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
